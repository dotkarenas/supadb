# supadb

The database of [supaboards.com](https://supaboards.com)

## Overview

This is a data repository for managing VTuber, AVTuber information using JSON-based structured data. The repository contains metadata and member information for various VTuber, AVTuber groups, which can be synced to a Supabase database.

## Requirements

- Node.js

## Setup

```bash
npm install
```

### ðŸ”’ Environment Variables

Copy `.env.sample` to create your environment files:

```bash
# For development
cp .env.sample .env.local

# For production
cp .env.sample .env.production
```

Then fill in the following values:

```bash
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
YOUTUBE_API_KEY=your_youtube_api_key
```

## Usage

### Update Metadata

After adding or modifying group data, update the metadata files:

```bash
npm run update-metadata
```

This automatically generates/updates:
- `data/jobs.json`: List of all job categories
- `data/{job_name}/groups.json`: List of groups within each job category

### Validate Data

```bash
npm run validate -- data/{job_name}/{group_name}/members.json
```

### ðŸ”’ Sync to Supabase

**Development:**
```bash
npm run bulk-create:development data/{job_name}/{group_name}/members.json
```

**Production:**
```bash
npm run bulk-create:production data/{job_name}/{group_name}/members.json
```

## Contributing

### Adding or Updating Data

1. Fork this repository
2. Create or edit JSON files in `data/{job_name}/{group_name}/members.json`
3. Update metadata: `npm run update-metadata`
4. Validate your changes: `npm run validate -- data/{job_name}/{group_name}/members.json`
5. Submit a pull request

### Data Structure

Each `members.json` follows this schema:

```json
{
  "metadata": {
    "job": "Job Name",
    "group": "Group Name",
    "options": ["Optional tags"],
    "source": "Official website URL"
  },
  "members": [
    {
      "name": "Name",
      "youtube_id": "UC... or @handle",
      "options": ["Optional tags"]
    }
  ]
}
```

### YouTube ID Formats

- Channel ID: `UCxxxxxxxxxxxxxxxxxxx` (22 characters after UC)
- Handle: `@username`

### Validation Rules

- `youtube_id` must match: `^(UC[a-zA-Z0-9_-]{22}|@[a-zA-Z0-9_-]+)$`
- Required fields: `metadata.job`, `metadata.group`, `member.name`, `member.youtube_id`
- Optional fields: `metadata.options`, `metadata.source`, `member.options`

## Data Structure

```
data/
â”œâ”€â”€ schema.json                              # JSON Schema definition
â”œâ”€â”€ members.template.jsonc                   # Template for new groups
â”œâ”€â”€ jobs.json                                # Auto-generated list of job categories
â”œâ”€â”€ {job_name}/
â”‚   â”œâ”€â”€ groups.json                          # Auto-generated list of groups
â”‚   â””â”€â”€ {group_name}/
â”‚       â””â”€â”€ members.json                     # VTuber/AVTuber member data
```

### File Descriptions

- `data/schema.json`: JSON Schema defining the structure for all data files
- `data/members.template.jsonc`: Template for creating new group data files
- `data/jobs.json`: List of job categories (auto-generated by `update-metadata`)
- `data/{job_name}/groups.json`: List of groups per job (auto-generated by `update-metadata`)
- `data/{job_name}/{group_name}/members.json`: Per-group member data files

## Contributors

<!-- readme: contributors -start -->
<!-- readme: contributors -end -->

## License

This project is open source.
